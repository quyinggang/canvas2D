import{_ as C,r as p,o as F,a as S,b as E,c as T,w as B,v as D,d as k}from"./index-9a21a5d4.js";const I={class:"tip"},L={__name:"Fireworks",setup(X){const y=p(!0),x=p(null),v=p(null);return F(()=>{const n=x.value.getBoundingClientRect(),l=v.value,d=window.devicePixelRatio;l.width=d*n.width,l.height=d*n.height;const i=l.getContext("2d");i.scale(d,d);let w=null;const a={startX:n.width/2,startY:n.height-2,hslaColor:120,bullotSpeed:2,acceleration:1.05,firection:.93,grivaty:1,fireWorkMinCount:25,fireWorkMaxCount:40,fireWorkMinRadius:5,fireWorkMaxRadius:7};let u=a.hslaColor;const b=(t,s,e,c)=>{const R=t-e,W=s-c;return Math.sqrt(Math.pow(R,2)+Math.pow(W,2))},g=function(t,s,e,c){this.x=this.sx=t,this.y=this.sy=s,this.tx=e,this.ty=c,this.hue=u,this.brightness=h(50,80),this.directionFlag=!1,this.radius=1,this.angle=Math.atan2(this.ty-this.sy,this.tx-this.sx),this.beginPoint=[[this.x,this.y]],this.speed=a.bullotSpeed,this.acceleration=a.acceleration,this.distanceToTarget=b(this.sx,this.sy,this.tx,this.ty)};g.prototype.change=function(t){this.directionFlag?this.radius>1?this.radius-=.15:this.directionFlag=!1:this.radius<8?this.radius+=.15:this.directionFlag=!0,this.beginPoint.pop(),this.beginPoint.unshift([this.x,this.y]),this.speed*=this.acceleration;var s=Math.cos(this.angle)*this.speed,e=Math.sin(this.angle)*this.speed,c=b(this.sx,this.sy,this.x+s,this.y+e);c>=this.distanceToTarget?(P(this.tx,this.ty),o.splice(t,1)):(this.x+=s,this.y+=e)},g.prototype.draw=function(){var t=this.beginPoint[this.beginPoint.length-1];i.beginPath(),i.arc(this.tx,this.ty,this.radius,0,Math.PI*2),i.strokeStyle="hsl("+this.hue+",100%,"+this.brightness+"%)",i.stroke(),i.beginPath(),i.moveTo(t[0],t[1]),i.lineTo(this.x,this.y),i.strokeStyle="hsl("+this.hue+",100%,"+this.brightness+"%)",i.stroke(),i.closePath()};const f=function(t,s){this.x=t,this.y=s,this.hue=h(u-30,u+30),this.brightness=h(50,80),this.radius=h(a.fireWorkMinRadius,a.fireWorkMaxRadius),this.angle=h(0,Math.PI*2),this.grivaty=a.grivaty,this.alpha=1,this.decay=h(.01,.03),this.speed=h(1,10),this.firection=a.firection};f.prototype.draw=function(){var t=i.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);t.addColorStop(0,"rgba(255, 255, 255, .2)"),t.addColorStop(.1,"hsla("+this.hue+",100%,"+this.brightness+"%,"+this.alpha+")"),t.addColorStop(1,"rgba(0, 0, 0, .6)"),i.beginPath(),i.arc(this.x,this.y,this.radius,0,Math.PI*2),i.fillStyle=t,i.fill(),i.closePath()},f.prototype.change=function(t){this.speed*=this.firection;var s=Math.cos(this.angle)*this.speed,e=Math.sin(this.angle)*this.speed+this.grivaty;this.alpha-=this.decay,this.alpha<=this.decay?r.splice(t,1):(this.x+=s,this.y+=e)};const o=[],r=[],h=function(t,s){return Math.random()*(s-t)+t},m=function(t,s){const e=new g(a.startX,a.startY,t,s);o.push(e)},P=function(t,s){for(var e=Math.round(h(a.fireWorkMinCount,a.fireWorkMaxCount));e--;)r.push(new f(t,s))},_=()=>{w=window.requestAnimationFrame(_),i.clearRect(0,0,n.width,n.height),u+=1;let t=o.length;for(;t--;)o[t].draw(),o[t].change(t);let s=r.length;for(;s--;)r[s].draw(),r[s].change(s)};_(),l.addEventListener("click",t=>{y.value=!1,m(t.pageX-n.left,t.pageY-n.top)}),S(()=>window.cancelAnimationFrame(w))}),(M,n)=>(E(),T("div",{class:"box",ref_key:"boxElementRef",ref:x},[B(k("span",I,"请点击查看效果",512),[[D,y.value]]),k("canvas",{class:"canvas",ref_key:"canvasElementRef",ref:v},null,512)],512))}},q=C(L,[["__scopeId","data-v-75df0804"]]);export{q as default};
