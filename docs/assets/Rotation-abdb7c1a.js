import{g}from"./index-4243d227.js";import{r as _,o as R,a as b,b as A,c as B}from"./index-36847955.js";const P={__name:"Rotation",setup(S){const w=_(null);return R(()=>{let d=null;const m=w.value,a=m.getBoundingClientRect();class x{constructor(t){this.x=t.x,this.y=t.y,this.origin=t.origin,this.color=t.color,this.width=t.width,this.height=t.height}rotate(t){this.angle=t}render(t){const{color:i,x:n,y:s,width:o,height:f,origin:c,angle:E}=this;t.save(),t.translate(c.x,c.y),t.rotate(E),t.translate(-c.x,-c.y),t.fillStyle=i,t.beginPath(),t.rect(n,s,o,f),t.fill(),t.closePath(),t.restore()}}class v{constructor(t){this.domElement=document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.setCanvasSize(t),this.setCanvasAttrs(),this.ctx.scale(t.pixel,t.pixel)}setCanvasSize(t){const{width:i,height:n,pixel:s}=t;this.width=i*s,this.height=n*s,this.styleWidth=i,this.styleHeight=n}setCanvasAttrs(){const{width:t,height:i,styleWidth:n,styleHeight:s,domElement:o}=this;o.width=t,o.height=i,o.style.cssText=`width:${n}px;height:${s}px;`}}class C{constructor(t){const{width:i,height:n,container:s}=t;this.content=s,this.width=i,this.height=n,this.children=[],this.canvas=new v({pixel:window.devicePixelRatio,width:i,height:n}),this.mountCanvas()}mountCanvas(){this.content.appendChild(this.canvas.domElement)}add(t){this.children.push(t)}render(){const{children:t}=this,i=this.canvas.ctx;i.clearRect(0,0,this.width,this.height);for(const n of t)n.render(i)}}const h=new C({container:m,width:a.width,height:a.height}),e={x:a.width/2,y:a.height/2},y=new x({origin:{x:e.x,y:e.y},x:e.x,y:e.y,width:60,height:60,color:g()}),u=new x({origin:{x:e.x,y:e.y},x:e.x*.5,y:e.y*.5,width:60,height:60,color:g()}),p=new x({origin:{x:e.x*2,y:e.y*2},x:e.x,y:e.y,width:60,height:60,color:g()});h.add(y),h.add(u),h.add(p),h.render();let r=0;requestAnimationFrame(function l(){y.rotate(r),u.rotate(r),p.rotate(r),r+=.01,h.render(),d=requestAnimationFrame(l)}),b(()=>window.cancelAnimationFrame(d))}),(d,m)=>(A(),B("div",{class:"box",ref_key:"boxElementRef",ref:w},null,512))}};export{P as default};
