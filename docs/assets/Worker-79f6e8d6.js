import{_ as p,r as c,o as g,b as m,c as w,d}from"./index-9a21a5d4.js";function v(){return new Worker(""+new URL("worker-d58f23bf.js",import.meta.url).href)}const k={__name:"Worker",setup(x){const l=c(null),f=c(null),i=c(null);return g(()=>{const t=l.value.getBoundingClientRect(),n=f.value,_=window.devicePixelRatio,s=_*t.width,o=_*t.height*.5;n.width=s,n.height=o;const a=i.value;if(a.width=s,a.height=o,n.transferControlToOffscreen){const e=n.transferControlToOffscreen();new v().postMessage({canvas:e},[e])}if(n.transferControlToOffscreen){const e=a.getContext("2d"),r=new v;r.postMessage({type:"init",size:{width:s,height:o}}),r.onmessage=h=>{e.drawImage(h.data.imageBitmap,0,0)},e.save(),e.fillStyle="red",e.beginPath(),e.rect(100,100,200,200),e.fill(),e.closePath(),e.restore()}}),(u,t)=>(m(),w("div",{class:"box",ref_key:"boxElementRef",ref:l},[d("canvas",{class:"canvas",ref_key:"canvas1Ref",ref:f},null,512),d("canvas",{class:"canvas",ref_key:"canvas2Ref",ref:i},null,512)],512))}},R=p(k,[["__scopeId","data-v-69334070"]]);export{R as default};
