import{_ as C,r as f,o as F,a as S,b as E,c as T,w as B,v as D,d as k}from"./index-40fc49b6.js";const I={class:"tip"},L={__name:"Fireworks",setup(X){const y=f(!0),x=f(null),v=f(null);return F(()=>{const n=x.value.getBoundingClientRect(),l=v.value,d=window.devicePixelRatio;l.width=d*n.width,l.height=d*n.height;const s=l.getContext("2d");s.scale(d,d);let b=null;const a={startX:n.width/2,startY:n.height-2,hslaColor:120,bullotSpeed:2,acceleration:1.05,firection:.93,grivaty:1,fireWorkMinCount:25,fireWorkMaxCount:40,fireWorkMinRadius:5,fireWorkMaxRadius:7};let u=a.hslaColor;const w=(t,e,i,c)=>{const R=t-i,W=e-c;return Math.sqrt(Math.pow(R,2)+Math.pow(W,2))},g=function(t,e,i,c){this.x=this.sx=t,this.y=this.sy=e,this.tx=i,this.ty=c,this.hue=u,this.brightness=h(50,80),this.directionFlag=!1,this.radius=1,this.angle=Math.atan2(this.ty-this.sy,this.tx-this.sx),this.beginPoint=[[this.x,this.y]],this.speed=a.bullotSpeed,this.acceleration=a.acceleration,this.distanceToTarget=w(this.sx,this.sy,this.tx,this.ty)};g.prototype.change=function(t){this.directionFlag?this.radius>1?this.radius-=.15:this.directionFlag=!1:this.radius<8?this.radius+=.15:this.directionFlag=!0,this.beginPoint.pop(),this.beginPoint.unshift([this.x,this.y]),this.speed*=this.acceleration;var e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed,c=w(this.sx,this.sy,this.x+e,this.y+i);c>=this.distanceToTarget?(P(this.tx,this.ty),o.splice(t,1)):(this.x+=e,this.y+=i)},g.prototype.draw=function(){var t=this.beginPoint[this.beginPoint.length-1];s.beginPath(),s.arc(this.tx,this.ty,this.radius,0,Math.PI*2),s.strokeStyle="hsl("+this.hue+",100%,"+this.brightness+"%)",s.stroke(),s.beginPath(),s.moveTo(t[0],t[1]),s.lineTo(this.x,this.y),s.strokeStyle="hsl("+this.hue+",100%,"+this.brightness+"%)",s.stroke(),s.closePath()};const p=function(t,e){this.x=t,this.y=e,this.hue=h(u-30,u+30),this.brightness=h(50,80),this.radius=h(a.fireWorkMinRadius,a.fireWorkMaxRadius),this.angle=h(0,Math.PI*2),this.grivaty=a.grivaty,this.alpha=1,this.decay=h(.01,.03),this.speed=h(1,10),this.firection=a.firection};p.prototype.draw=function(){var t=s.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius);t.addColorStop(0,"rgba(255, 255, 255, .2)"),t.addColorStop(.1,"hsla("+this.hue+",100%,"+this.brightness+"%,"+this.alpha+")"),t.addColorStop(1,"rgba(0, 0, 0, .6)"),s.beginPath(),s.arc(this.x,this.y,this.radius,0,Math.PI*2),s.fillStyle=t,s.fill(),s.closePath()},p.prototype.change=function(t){this.speed*=this.firection;var e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed+this.grivaty;this.alpha-=this.decay,this.alpha<=this.decay?r.splice(t,1):(this.x+=e,this.y+=i)};const o=[],r=[],h=function(t,e){return Math.random()*(e-t)+t},m=function(t,e){const i=new g(a.startX,a.startY,t,e);o.push(i)},P=function(t,e){for(var i=Math.round(h(a.fireWorkMinCount,a.fireWorkMaxCount));i--;)r.push(new p(t,e))},_=()=>{b=window.requestAnimationFrame(_),s.clearRect(0,0,n.width,n.height),u+=1;let t=o.length;for(;t--;)o[t].draw(),o[t].change(t);let e=r.length;for(;e--;)r[e].draw(),r[e].change(e)};_(),l.addEventListener("click",t=>{y.value=!1,m(t.pageX-n.left,t.pageY-n.top)}),S(()=>window.cancelAnimationFrame(b))}),(M,n)=>(E(),T("div",{class:"box",ref_key:"boxElementRef",ref:x},[B(k("span",I,"请点击查看效果",512),[[D,y.value]]),k("canvas",{class:"canvas",ref_key:"canvasElementRef",ref:v},null,512)],512))}},q=C(L,[["__scopeId","data-v-7dbea7c7"]]);export{q as default};
